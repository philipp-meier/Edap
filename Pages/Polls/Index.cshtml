@page "{id:int}"
@using Edap.Shared;
@model Edap.Pages.Polls.IndexModel

@{
    ViewData["Title"] = Model.Poll?.Title;
}

<h2>@(Model.Poll?.Title ?? "Not found")</h2>

@if (Model.Poll != null)
{
    <div class="mb-6">
        <label for="description" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Description</label>
        <input type="text" id="description" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" value="@Model.Poll.Description">
    </div>

    <div class="mb-6">
        <label for="location" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Location</label>
        <input type="text" id="location" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" value="@Model.Poll.Location">
    </div>

    @if (Model.Poll.CloseDate != null)
    {
        <div class="mb-6">
            <label for="closedate" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Closed date</label>
            <label id="closedate" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500">@Model.Poll.CloseDate</label>
        </div>
    }

    <div class="mt-3">
        <partial name="_PollOptionTable" model="_PollOptionTableModel.Create(Model.Poll, true)" />
    </div>

    <h6>Actions</h6>
    <form method="post">
        <button type="submit" asp-page-handler="ToggleClose" asp-route-id="@Model.Poll.Id" class="px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">@(Model.Poll.CloseDate.HasValue ? "Reopen poll" : "Close poll")</button>
        @{
            var pollGuid = Model.Poll.PollGuid.ToString("N");
            <button asp-page="../Polls/Participate" asp-route-pollGuid="@pollGuid" class="px-3 py-2 text-sm font-medium text-center text-white bg-blue-700 rounded-lg hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Participate</button>
        }
        <button type="submit" asp-page-handler="Delete" asp-route-id="@Model.Poll.Id" class="px-3 py-2 text-sm font-medium text-center text-white bg-red-700 rounded-lg hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 dark:bg-red-600 dark:hover:bg-red-700 dark:focus:ring-red-800">Delete</button>
    </form>
}


<div class="mt-3">
    <partial name="_BackToListButton" />
</div>